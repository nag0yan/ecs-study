<!--
  ** MANAGED BY AWS CODE HABITS
  ** DO NOT EDIT THIS FILE
  **
  ** 1) Make all changes to `doc/habits.yaml`
  ** 2) Run `make doc/build` to rebuild this file
  **
-->

![logo][logo]


[![Test](https://github.com/awslabs/aws-code-habits/actions/workflows/test.yaml/badge.svg)](https://github.com/awslabs/aws-code-habits/actions/workflows/test.yaml)[![GitHub Issues](https://img.shields.io/github/issues/awslabs/aws-code-habits)](https://github.com/awslabs/aws-code-habits/issues)[![GitHub Stars](https://img.shields.io/github/stars/awslabs/aws-code-habits)](https://github.com/awslabs/aws-code-habits/stargazers)[![hygiene](https://github.com/awslabs/aws-code-habits/actions/workflows/hygiene.yaml/badge.svg)](https://github.com/awslabs/aws-code-habits/actions/workflows/hygiene.yaml)

# AWS Code Habits

A library with Make targets, Ansible playbooks, Jinja templates (and more) designed to boost common software development tasks and enhance governance.

| ![screenshot-1](https://user-images.githubusercontent.com/3298422/198290134-fec4a14d-8542-4b92-9cbc-d33f476e7a74.gif) |
|:--:|
| *Installing AWS Code Habits* |


## Table of Contents

- [Getting Started](#getting-started)

- [Prerequisites](#prerequisites)


- [Usage](#usage)

- [How-Tos](#how-tos)
  - [How to import environment variables](#how-to-import-environment-variables)
  - [How to initialize pre-commit config](#how-to-initialize-pre-commit-config)
  - [How to maintain documentation](#how-to-maintain-documentation)
  - [How to expand Habits commands](#how-to-expand-habits-commands)

- [Testing](#testing)


## Getting Started

AWS Code Habits was developed to be used as a [git submodule](https://git-scm.com/book/en/v2/Git-Tools-Submodules).

On a terminal, on your project's root directory, execute one of the following commands:

```bash
git submodule add --name habits -b main https://github.com/awslabs/aws-code-habits.git habits
```

This will clone AWS Code Habits on a folder named `habits` and track against the `main` branch.
Now, you will need to create, or add to your existing, `Makefile`.

```bash
export WORKSPACE=$(shell pwd)
export HABITS = $(WORKSPACE)/habits

include $(HABITS)/lib/make/Makefile
include $(HABITS)/lib/make/*/Makefile
```

Remember, next time you need to clone your repository, you will need to include `--recurse-submodules` parameters.
```bash
git clone --recurse-submodules ...
```
> If you already cloned the project and forgot `--recurse-submodules`, you can combine the `git submodule init` and `git submodule update` steps by running `git submodule update --init`. To also initialize, fetch and checkout any nested submodules, you can use the foolproof `git submodule update --init --recursive`. - [Git Tools Submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)

Check the [scripts](scripts/) directory, if you want to automate the initialization and installation of AWS Code Habits.`


## Prerequisites
  A list of things you need, or how to install them.
> At this stage, we are only supporting Linux (Ubuntu) environments (which can be obtained via WSL (Windows) or DevContainers (Mac/Linux/Windows))

- [Python 3](https://www.python.org) - Whether you're new to programming or an experienced developer, it's easy to learn and use Python.
- [Pip](https://pypi.org/project/pip/) - pip is the package installer for Python.



## Usage

```bash
make [tab][tab]
```

```bash
make help
```
For more information about each [Make targets available](Makefile.md).

## How-Tos
Below you can learn

### How to import environment variables
Create a `.env` file, example:

```bash
echo 'ENVIRONMENT=dev' > dev.env
```

Now include `dev.env` into your Makefile, for example:
```bash
include $(WORKSPACE)/tools.env # pin the version of your tools
include $(WORKSPACE)/dev.env # don't store secrets in git
include $(WORKSPACE)/dev.secrets.env # remember to add *.secrets.env to .gitignore
```

### How to initialize pre-commit config
```bash
make pre-commit/init
```

To run all `pre-commit` rules in all files, simply run:

```bash
make pre-commit/run
```

### How to maintain documentation
1. First initialize all documentation files:
```bash
make doc/init
```

This will create a folder named `doc/` in the root directory of your project and create a file named `habits.yaml` inside of it.

2. Modify the contents of `doc/habits.yaml` accordingly and execute:

```
make doc/build
```

3. `README.md` will be rendered.

### How to expand Habits commands
You can use [Habits][habits] to meet your needs, in your `Makefile` you can add the following to ensure code and documentation hygiene:
```bash
.PHONY: hygiene
hygiene: doc/build pre-commit/run
```

Another example, if you want to perform several tasks with `AWS CloudFormation`:
```bash
.PHONY: hygiene
hygiene: aws/cloudformation/hygiene

.PHONY: plan
plan: aws/cloudformation/create-change-set

.PHONY: discard
discard: aws/cloudformation/delete-change-set

.PHONY: apply
apply: aws/cloudformation/execute-change-set
```


## Testing
To perform habits checks:
```bash
make habits/check
```



## References
- [GNU Make](https://www.gnu.org/software/make/) - GNU Make is a tool which controls the generation of executables and other non-source files of a program from the program's source files.
- [Windows Subsystem for Linux (Ubuntu)](https://docs.microsoft.com/en-us/windows/wsl/install) - WSL enables you to use Linux tools, like Bash or Grep, completely integrated with Windows tools, like PowerShell or Visual Studio Code, with no need to dual-boot.
- [Visual Studio Code](https://code.visualstudio.com/) - Visual Studio Code is a code editor redefined and optimized for building and debugging modern web and cloud applications.
- [VSCode Remote Development Extension Pack](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack) - An extension pack that lets you open any folder in a container, on a remote machine, or in WSL and take advantage of VS Code's full feature set.
- [Git Submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules) - Submodules allow you to keep a Git repository as a subdirectory of another Git repository.
- [Docker](https://www.docker.com/products/docker-desktop/) - The fastest way to containerize applications
- [Visual Studio Code](https://code.visualstudio.com/) - Visual Studio Code is a code editor redefined and optimized for building and debugging modern web and cloud applications.
- [Visual Studio DevContainers](https://code.visualstudio.com/docs/devcontainers/containers) - The Visual Studio Code Dev Containers extension lets you use a Docker container as a full-featured development environment.
- [VSCode Remote Development Extension Pack](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack) - An extension pack that lets you open any folder in a container, on a remote machine, or in WSL and take advantage of VS Code's full feature set.
- [Ansible](https://www.ansible.com/) - Ansible is an open source community project sponsored by Red Hat, it's the simplest way to automate IT.
- [Jinja2](https://docs.ansible.com/ansible/latest/user_guide/playbooks_templating.html) - Ansible uses Jinja2 templating to enable dynamic expressions and access to variables and facts.


## License
This project is licensed under the MIT-0 License. See the [LICENSE](LICENSE) file.

## Copyright
Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.


[repo]: https://github.com/awslabs/aws-code-habits
[logo]: doc/logo.png

[habits]: https://github.com/awslabs/aws-code-habits
